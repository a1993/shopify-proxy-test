# ğŸš€ æœ¬åœ°è¿è¡ŒæŒ‡å— - test-sq + guya-uniwigs-shop

## ğŸ“‹ é¡¹ç›®å…³ç³»

```
test-sq (Shopify App Proxy)     guya-uniwigs-shop (Nuxt é¡¹ç›®)
        ç«¯å£ 3000           â†’           ç«¯å£ 3003
```

**æµç¨‹ï¼š**
```
Shopify åº—é“º /apps/a
        â†“
test-sq (ä»£ç†æœåŠ¡å™¨) :3000
        â†“
guya-uniwigs-shop (Nuxt) :3003
```

---

## ğŸ¯ æœ¬åœ°è¿è¡Œæ­¥éª¤

### æ­¥éª¤ 1: å¯åŠ¨ guya-uniwigs-shop (Nuxt é¡¹ç›®)

æ‰“å¼€ç¬¬ä¸€ä¸ªç»ˆç«¯ï¼š

```powershell
cd D:\self\shopifyApps\shopify-proxy-app\guya-uniwigs-shop

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm run dev
```

ç­‰å¾… Nuxt å¯åŠ¨å®Œæˆï¼Œä½ ä¼šçœ‹åˆ°ï¼š
```
âœ“ Nitro built in xxx ms
âœ“ Vite server ready in xxx ms
  âœ Local:   http://localhost:3003/
```

**ç¡®è®¤å¯ä»¥è®¿é—®ï¼š** http://localhost:3003

---

### æ­¥éª¤ 2: å¯åŠ¨ test-sq (ä»£ç†æœåŠ¡å™¨)

æ‰“å¼€ç¬¬äºŒä¸ªç»ˆç«¯ï¼š

```powershell
cd D:\self\shopifyApps\shopify-proxy-app\test-sq

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
npm install

# å¯åŠ¨ä»£ç†æœåŠ¡å™¨
npm run dev
```

ä½ ä¼šçœ‹åˆ°ï¼š
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           ğŸš€ Shopify App Proxy Server å·²å¯åŠ¨              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ æœåŠ¡å™¨åœ°å€: http://localhost:3000
ğŸ¯ ä»£ç†ç«¯ç‚¹: http://localhost:3000/proxy
ğŸ”— ç›®æ ‡åŸŸå: http://localhost:3003
ğŸ“¦ Shopify è·¯å¾„: /apps/a
```

---

### æ­¥éª¤ 3: æµ‹è¯•ä»£ç†

åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š

1. **ä»£ç†æœåŠ¡å™¨é¦–é¡µï¼š** http://localhost:3000
2. **ä»£ç†æµ‹è¯•ï¼š** http://localhost:3000/proxy

å¦‚æœé…ç½®æ­£ç¡®ï¼Œè®¿é—® `/proxy` ä¼šæ˜¾ç¤º guya-uniwigs-shop çš„å†…å®¹ã€‚

---

## âš™ï¸ ç¯å¢ƒå˜é‡é…ç½®

### test-sq/.env

```env
# Shopify é…ç½®
SHOPIFY_API_KEY=9853c81f5948bb94e3b2ebb45fbc7d78
SHOPIFY_API_SECRET=ä½ çš„Client_secret

# ä»£ç†ç›®æ ‡ - guya-uniwigs-shop
TARGET_DOMAIN=http://localhost:3003

# æœåŠ¡å™¨é…ç½®
PORT=3000
NODE_ENV=development

# App Proxy è·¯å¾„
PROXY_PREFIX=apps
PROXY_SUBPATH=a
```

---

## ğŸ“Š ç«¯å£è¯´æ˜

| é¡¹ç›® | ç«¯å£ | è¯´æ˜ |
|-----|------|-----|
| test-sq | 3000 | Shopify App Proxy ä»£ç†æœåŠ¡å™¨ |
| guya-uniwigs-shop | 3003 | Nuxt æ´»åŠ¨é¡µé¢é¡¹ç›® |

---

## ğŸ”„ ä»£ç†è·¯å¾„å¯¹åº”å…³ç³»

| Shopify è®¿é—®è·¯å¾„ | ä»£ç†æœåŠ¡å™¨ | æœ€ç»ˆåˆ°è¾¾ |
|----------------|-----------|---------|
| `/apps/a` | `/proxy` | `http://localhost:3003/` |
| `/apps/a/campaigns/test` | `/proxy/campaigns/test` | `http://localhost:3003/campaigns/test` |
| `/apps/a/_nuxt/xxx` | `/proxy/_nuxt/xxx` | `http://localhost:3003/_nuxt/xxx` |

---

## ğŸŒ ä½¿ç”¨ ngrok è¿›è¡Œå¤–ç½‘æµ‹è¯•

å¦‚æœä½ æƒ³é€šè¿‡ Shopify å®é™…æµ‹è¯•ï¼Œéœ€è¦å°† test-sq æš´éœ²åˆ°å…¬ç½‘ã€‚

### 1. å¯åŠ¨ ngrok

```powershell
ngrok http 3000
```

ä½ ä¼šå¾—åˆ°ä¸€ä¸ªå…¬ç½‘ URLï¼Œä¾‹å¦‚ï¼š`https://abc123.ngrok.io`

### 2. æ›´æ–° Shopify é…ç½®

åœ¨ Shopify Partners ä¸­ï¼š
- **App URL**: `https://abc123.ngrok.io`
- **App Proxy URL**: `https://abc123.ngrok.io/proxy`

### 3. æµ‹è¯•

è®¿é—®ï¼š`https://your-shop.myshopify.com/apps/a`

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: è®¿é—® /proxy æ˜¾ç¤ºè¿æ¥æ‹’ç»

**åŸå› ï¼š** guya-uniwigs-shop æ²¡æœ‰è¿è¡Œ

**è§£å†³ï¼š**
```powershell
cd guya-uniwigs-shop
pnpm run dev
```

### é—®é¢˜ 2: é¡µé¢æ˜¾ç¤ºä½†æ ·å¼ä¸¢å¤±

**åŸå› ï¼š** é™æ€èµ„æºè·¯å¾„é—®é¢˜

**è§£å†³ï¼š** 
server.js å·²ç»å¤„ç†äº† `/_nuxt/` è·¯å¾„çš„é‡å†™ã€‚å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œæ£€æŸ¥ Nuxt çš„ baseURL é…ç½®ã€‚

### é—®é¢˜ 3: ç«¯å£å†²çª

**è§£å†³ï¼š** ä¿®æ”¹ .env ä¸­çš„ PORT æˆ– Nuxt çš„ç«¯å£é…ç½®

---

## ğŸ“‹ å¯åŠ¨é¡ºåºæ£€æŸ¥æ¸…å•

- [ ] 1. guya-uniwigs-shop å·²å¯åŠ¨ (ç«¯å£ 3003)
- [ ] 2. test-sq å·²å¯åŠ¨ (ç«¯å£ 3000)
- [ ] 3. è®¿é—® http://localhost:3003 æ­£å¸¸
- [ ] 4. è®¿é—® http://localhost:3000 æ­£å¸¸
- [ ] 5. è®¿é—® http://localhost:3000/proxy æ˜¾ç¤º Nuxt å†…å®¹

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨è„šæœ¬

ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯åŠ¨è„šæœ¬æ¥åŒæ—¶è¿è¡Œä¸¤ä¸ªé¡¹ç›®ã€‚

### åˆ›å»º start-all.ps1

```powershell
# start-all.ps1
Write-Host "å¯åŠ¨ guya-uniwigs-shop..." -ForegroundColor Green
Start-Process powershell -ArgumentList "-NoExit", "-Command", "cd D:\self\shopifyApps\shopify-proxy-app\guya-uniwigs-shop; pnpm run dev"

Start-Sleep -Seconds 5

Write-Host "å¯åŠ¨ test-sq..." -ForegroundColor Green
Start-Process powershell -ArgumentList "-NoExit", "-Command", "cd D:\self\shopifyApps\shopify-proxy-app\test-sq; npm run dev"

Write-Host "ä¸¤ä¸ªæœåŠ¡å·²å¯åŠ¨ï¼" -ForegroundColor Yellow
Write-Host "guya-uniwigs-shop: http://localhost:3003" -ForegroundColor Cyan
Write-Host "test-sq: http://localhost:3000" -ForegroundColor Cyan
```

è¿è¡Œï¼š
```powershell
.\start-all.ps1
```

---

## ğŸ“š ä¸‹ä¸€æ­¥

1. âœ… æœ¬åœ°æµ‹è¯•é€šè¿‡
2. éƒ¨ç½² guya-uniwigs-shop åˆ°ç”Ÿäº§æœåŠ¡å™¨
3. éƒ¨ç½² test-sq åˆ° Railway/Render
4. æ›´æ–° Shopify Partners é…ç½®
5. å®‰è£…åº”ç”¨åˆ°åº—é“ºæµ‹è¯•

---

**ç°åœ¨å…ˆå¯åŠ¨ä¸¤ä¸ªé¡¹ç›®è¿›è¡Œæœ¬åœ°æµ‹è¯•ï¼** ğŸš€

