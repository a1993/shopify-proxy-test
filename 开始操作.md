# ğŸš€ test-sq åº”ç”¨ - æ¥ä¸‹æ¥çš„æ“ä½œæ­¥éª¤

## âœ… å·²å®Œæˆ

- âœ… server.js å·²åˆ›å»º
- âœ… package.json å·²æ›´æ–°
- âœ… shopify.app.toml å·²é…ç½®ï¼ˆApp Proxy: /apps/aï¼‰
- âœ… .env æ–‡ä»¶å·²åˆ›å»º

## ğŸ“‹ æ¥ä¸‹æ¥çš„æ­¥éª¤

### Step 1: è·å– Client Secret

1. è®¿é—®ï¼šhttps://partners.shopify.com/
2. æ‰¾åˆ°ä½ çš„ `test-sq` åº”ç”¨
3. åœ¨ **Client credentials** éƒ¨åˆ†
4. ç‚¹å‡»æ˜¾ç¤ºå¹¶å¤åˆ¶ **Client secret**
5. æ‰“å¼€ `.env` æ–‡ä»¶ï¼Œæ›¿æ¢ï¼š
   ```env
   SHOPIFY_API_SECRET=ç²˜è´´ä½ çš„Client_secret
   ```

### Step 2: é…ç½®ç›®æ ‡åŸŸåB

åœ¨ `.env` æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹ï¼š

```env
TARGET_DOMAIN=https://ä½ çš„å®é™…åŸŸåB.com
```

ä¾‹å¦‚ï¼š
- `TARGET_DOMAIN=https://blog.yourdomain.com`
- `TARGET_DOMAIN=https://marketing.example.com`

### Step 3: å®‰è£…ä¾èµ–

æ‰“å¼€ PowerShellï¼Œè¿è¡Œï¼š

```powershell
cd D:\self\shopifyApps\shopify-proxy-app\test-sq

npm install
```

### Step 4: æœ¬åœ°æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

```powershell
npm run dev
```

å¦‚æœæˆåŠŸï¼Œè®¿é—® http://localhost:3000 åº”è¯¥èƒ½çœ‹åˆ°æœåŠ¡å™¨è¿è¡Œé¡µé¢ã€‚

æŒ‰ `Ctrl+C` åœæ­¢æœåŠ¡å™¨ã€‚

### Step 5: éƒ¨ç½²åˆ° Railway

#### 5.1 æ¨é€åˆ° GitHub

```powershell
cd D:\self\shopifyApps\shopify-proxy-app\test-sq

# åˆå§‹åŒ– git
git init

# æ·»åŠ æ–‡ä»¶
git add .

# æäº¤
git commit -m "Initial commit"

# æ¨é€åˆ° GitHubï¼ˆå…ˆåœ¨ GitHub åˆ›å»º test-sq ä»“åº“ï¼‰
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/test-sq.git
git branch -M main
git push -u origin main
```

#### 5.2 éƒ¨ç½²åˆ° Railway

1. è®¿é—® https://railway.app
2. ç‚¹å‡» **New Project**
3. é€‰æ‹© **Deploy from GitHub repo**
4. é€‰æ‹© `test-sq` ä»“åº“
5. Railway è‡ªåŠ¨æ£€æµ‹å¹¶éƒ¨ç½²

#### 5.3 é…ç½® Railway ç¯å¢ƒå˜é‡

åœ¨ Railway é¡¹ç›®ä¸­ï¼Œç‚¹å‡» **Variables**ï¼Œæ·»åŠ ï¼š

```
SHOPIFY_API_KEY=9853c81f5948bb94e3b2ebb45fbc7d78
SHOPIFY_API_SECRET=ä½ çš„Client_secret
TARGET_DOMAIN=https://ä½ çš„åŸŸåB.com
NODE_ENV=production
PROXY_PREFIX=apps
PROXY_SUBPATH=a
```

#### 5.4 è·å–éƒ¨ç½² URL

1. åœ¨ Railway é¡¹ç›®ä¸­ï¼Œç‚¹å‡» **Settings**
2. åœ¨ **Domains** éƒ¨åˆ†ï¼Œç‚¹å‡» **Generate Domain**
3. è®°å½• URLï¼Œä¾‹å¦‚ï¼š`https://test-sq.up.railway.app`

### Step 6: æ›´æ–° Shopify é…ç½®

#### 6.1 æ›´æ–° shopify.app.toml

å°† Railway çš„ URL æ›´æ–°åˆ°é…ç½®æ–‡ä»¶ï¼š

```toml
application_url = "https://test-sq.up.railway.app"

[auth]
redirect_urls = [
  "https://test-sq.up.railway.app/auth/callback"
]
```

æäº¤å¹¶æ¨é€åˆ° GitHubï¼ˆRailway ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²ï¼‰ã€‚

#### 6.2 æ›´æ–° Railway ç¯å¢ƒå˜é‡

æ·»åŠ /æ›´æ–°ï¼š

```
SHOPIFY_APP_URL=https://test-sq.up.railway.app
```

#### 6.3 åœ¨ Dev Dashboard æ›´æ–° App URL

1. è®¿é—® https://partners.shopify.com/
2. æ‰¾åˆ° `test-sq` åº”ç”¨
3. ç‚¹å‡» **Configuration**
4. æ›´æ–°ï¼š
   - **App URL**: `https://test-sq.up.railway.app`
   - **Allowed redirection URL(s)**: `https://test-sq.up.railway.app/auth/callback`
5. ä¿å­˜

### Step 7: é…ç½® App Proxyï¼ˆé‡è¦ï¼ï¼‰

åœ¨ Dev Dashboard ä¸­ï¼š

1. ç‚¹å‡» **Extensions** æ ‡ç­¾
2. ç‚¹å‡» **Create extension**
3. é€‰æ‹© **Online store** â†’ **App proxy**
4. é…ç½®ï¼š
   - **App proxy URL**: `https://test-sq.up.railway.app/proxy`
   - **Subpath prefix**: é€‰æ‹© `apps`
   - **Subpath**: è¾“å…¥ `a`
5. ä¿å­˜

å®Œæ•´è·¯å¾„é¢„è§ˆåº”è¯¥æ˜¯ï¼š`/apps/a` âœ…

### Step 8: å®‰è£…å¹¶æµ‹è¯•

#### 8.1 å®‰è£…åº”ç”¨

1. åœ¨ Dev Dashboardï¼Œç‚¹å‡» **Test your app**
2. é€‰æ‹©ä½ çš„æµ‹è¯•åº—é“ºï¼ˆæˆ–åˆ›å»ºæ–°çš„ï¼‰
3. å®‰è£…åº”ç”¨

#### 8.2 æµ‹è¯•è®¿é—®

åœ¨æµè§ˆå™¨è®¿é—®ï¼š

```
https://your-shop.myshopify.com/apps/a
```

**æˆåŠŸï¼** ğŸ‰ ä½ åº”è¯¥èƒ½çœ‹åˆ°åŸŸåBçš„å†…å®¹ã€‚

---

## ğŸ¬ å¿«é€Ÿå‘½ä»¤é€ŸæŸ¥

```powershell
# è¿›å…¥ç›®å½•
cd D:\self\shopifyApps\shopify-proxy-app\test-sq

# å®‰è£…ä¾èµ–
npm install

# æœ¬åœ°æµ‹è¯•
npm run dev

# Git æ“ä½œ
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/test-sq.git
git push -u origin main
```

---

## â±ï¸ æ—¶é—´ä¼°è®¡

- Step 1-2: è·å–å‡­è¯å’Œé…ç½® - 5 åˆ†é’Ÿ
- Step 3-4: å®‰è£…å’Œæµ‹è¯• - 3 åˆ†é’Ÿ
- Step 5: éƒ¨ç½²åˆ° Railway - 5 åˆ†é’Ÿ
- Step 6: æ›´æ–°é…ç½® - 5 åˆ†é’Ÿ
- Step 7: é…ç½® App Proxy - 3 åˆ†é’Ÿ
- Step 8: å®‰è£…æµ‹è¯• - 2 åˆ†é’Ÿ

**æ€»è®¡ï¼šçº¦ 23 åˆ†é’Ÿ**

---

## ğŸ” æ£€æŸ¥æ¸…å•

### é…ç½®é˜¶æ®µ
- [ ] è·å– Client Secret
- [ ] æ›´æ–° .env æ–‡ä»¶
- [ ] é…ç½® TARGET_DOMAIN
- [ ] è¿è¡Œ npm install

### éƒ¨ç½²é˜¶æ®µ
- [ ] ä»£ç æ¨é€åˆ° GitHub
- [ ] Railway éƒ¨ç½²æˆåŠŸ
- [ ] é…ç½® Railway ç¯å¢ƒå˜é‡
- [ ] è·å– Railway URL

### Shopify é…ç½®
- [ ] æ›´æ–° shopify.app.toml
- [ ] æ›´æ–° Dev Dashboard çš„ App URL
- [ ] é…ç½® App Proxy (/apps/a)

### æµ‹è¯•é˜¶æ®µ
- [ ] å®‰è£…åº”ç”¨åˆ°åº—é“º
- [ ] è®¿é—® /apps/a æˆåŠŸ
- [ ] çœ‹åˆ°åŸŸåBçš„å†…å®¹

---

## ğŸ’¡ é‡è¦æç¤º

### å…³äº App URL

- âŒ **æ—§çš„é»˜è®¤ URL**ï¼š`https://shopify.dev/apps/default-app-home`
- âœ… **æ–°çš„å®é™… URL**ï¼š`https://test-sq.up.railway.app`

**å¿…é¡»æ›´æ–°æˆå®é™…çš„éƒ¨ç½² URL æ‰èƒ½å·¥ä½œï¼**

### å…³äº Dev Dashboard vs Partners

- **Dev Dashboard** å’Œ **Shopify Partners** æ˜¯åŒä¸€ä¸ªåœ°æ–¹
- ä½ çš„åº”ç”¨å°±æ˜¯åœ¨é‚£é‡Œåˆ›å»ºçš„
- è¿™å°±æ˜¯æ­£ç¡®çš„å¼€å‘æ–¹å¼
- **ä¸éœ€è¦åˆ›å»ºæ–°åº”ç”¨**

---

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

### é—®é¢˜ï¼šRailway éƒ¨ç½²å¤±è´¥

**æ£€æŸ¥ï¼š**
- package.json æ˜¯å¦æœ‰ `"type": "module"`
- dependencies æ˜¯å¦å®Œæ•´
- æŸ¥çœ‹ Railway æ—¥å¿—

### é—®é¢˜ï¼šè®¿é—® /apps/a æ˜¾ç¤º 404

**æ£€æŸ¥ï¼š**
- App Proxy æ˜¯å¦é…ç½®æ­£ç¡®ï¼ˆprefix: apps, subpath: aï¼‰
- åº”ç”¨æ˜¯å¦å·²å®‰è£…åˆ°åº—é“º
- Railway ç¯å¢ƒå˜é‡æ˜¯å¦å®Œæ•´

### é—®é¢˜ï¼šçœ‹åˆ°ç©ºç™½é¡µé¢

**æ£€æŸ¥ï¼š**
- TARGET_DOMAIN æ˜¯å¦æ­£ç¡®
- åŸŸåBæ˜¯å¦å¯ä»¥è®¿é—®
- æŸ¥çœ‹ Railway æ—¥å¿—

---

**ç°åœ¨å¼€å§‹ Step 1ï¼** ğŸš€

è·å– Client Secretï¼šhttps://partners.shopify.com/

