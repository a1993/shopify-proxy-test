# ğŸš€ éƒ¨ç½²å®Œæ•´æŒ‡å— - å®ç° /apps/test ä»£ç†

## ğŸ¯ ç›®æ ‡

| è®¿é—® | æ˜¾ç¤ºå†…å®¹ |
|-----|---------|
| `https://smka17-ff.myshopify.com/apps/test` | `http://54.176.230.168:4001/` |
| `https://smka17-ff.myshopify.com/apps/test/campaigns/giveaway` | `http://54.176.230.168:4001/campaigns/giveaway` |

---

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

### Step 1: éƒ¨ç½² test-sq åˆ° Railway

#### 1.1 æ¨é€ä»£ç åˆ° GitHub

```powershell
cd D:\self\shopifyApps\shopify-proxy-app\test-sq

# åˆå§‹åŒ– Gitï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git init

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤
git commit -m "Shopify app proxy for uniwigs campaigns"

# åœ¨ GitHub åˆ›å»ºä»“åº“åï¼Œæ¨é€
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/test-sq.git
git branch -M main
git push -u origin main
```

#### 1.2 åœ¨ Railway éƒ¨ç½²

1. è®¿é—® https://railway.app å¹¶ç™»å½•
2. ç‚¹å‡» **New Project**
3. é€‰æ‹© **Deploy from GitHub repo**
4. é€‰æ‹© `test-sq` ä»“åº“
5. Railway ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å¼€å§‹éƒ¨ç½²

#### 1.3 é…ç½® Railway ç¯å¢ƒå˜é‡

åœ¨ Railway é¡¹ç›®ä¸­ï¼Œç‚¹å‡» **Variables**ï¼Œæ·»åŠ ï¼š

```
TARGET_DOMAIN=http://54.176.230.168:4001
NODE_ENV=production
SHOPIFY_API_KEY=9853c81f5948bb94e3b2ebb45fbc7d78
SHOPIFY_API_SECRET=ä½ çš„Client_secret
PROXY_PREFIX=apps
PROXY_SUBPATH=test
```

#### 1.4 ç”ŸæˆåŸŸå

1. åœ¨ Railway é¡¹ç›®ä¸­ï¼Œç‚¹å‡» **Settings**
2. åœ¨ **Domains** éƒ¨åˆ†ï¼Œç‚¹å‡» **Generate Domain**
3. ä½ ä¼šå¾—åˆ°ä¸€ä¸ª URLï¼Œä¾‹å¦‚ï¼š`https://test-sq-production.up.railway.app`

**è®°å½•è¿™ä¸ª URLï¼**

---

### Step 2: æ›´æ–° Shopify é…ç½®

#### 2.1 æ›´æ–° shopify.app.toml

```toml
application_url = "https://test-sq-production.up.railway.app"

[auth]
redirect_urls = [
  "https://test-sq-production.up.railway.app/auth/callback"
]

[app_proxy]
url = "/proxy"
prefix = "apps"
subpath = "test"
```

#### 2.2 æ›´æ–° Railway ç¯å¢ƒå˜é‡

æ·»åŠ ï¼š
```
SHOPIFY_APP_URL=https://test-sq-production.up.railway.app
```

---

### Step 3: åœ¨ Shopify Partners é…ç½®

1. è®¿é—® https://partners.shopify.com/
2. æ‰¾åˆ° `test-sq` åº”ç”¨

#### 3.1 é…ç½® App URL

ç‚¹å‡» **Configuration**ï¼š
- **App URL**: `https://test-sq-production.up.railway.app`
- **Allowed redirection URLs**: `https://test-sq-production.up.railway.app/auth/callback`

ç‚¹å‡» **Save**

#### 3.2 é…ç½® App Proxyï¼ˆé‡è¦ï¼ï¼‰

1. ç‚¹å‡» **Extensions** æ ‡ç­¾
2. ç‚¹å‡» **Create extension**
3. é€‰æ‹© **Online store** â†’ **App proxy**
4. é…ç½®ï¼š
   - **App proxy URL**: `https://test-sq-production.up.railway.app/proxy`
   - **Subpath prefix**: `apps`
   - **Subpath**: `test`
5. ç‚¹å‡» **Save**

å®Œæ•´è·¯å¾„é¢„è§ˆï¼š`/apps/test` âœ…

---

### Step 4: å®‰è£…åº”ç”¨åˆ°åº—é“º

1. åœ¨ Dev Dashboard ä¸­ï¼Œç‚¹å‡» **Test your app**
2. é€‰æ‹© `smka17-ff` åº—é“º
3. ç‚¹å‡» **Install app**
4. ç¡®è®¤å®‰è£…

---

### Step 5: æµ‹è¯•è®¿é—®

åœ¨æµè§ˆå™¨è®¿é—®ï¼š

```
https://smka17-ff.myshopify.com/apps/test
```

ä½ åº”è¯¥èƒ½çœ‹åˆ° `http://54.176.230.168:4001/` çš„å†…å®¹ï¼

æµ‹è¯•æ´»åŠ¨é¡µé¢ï¼š

```
https://smka17-ff.myshopify.com/apps/test/campaigns/giveaway
```

ä½ åº”è¯¥èƒ½çœ‹åˆ°å¯¹åº”çš„æ´»åŠ¨é¡µé¢ï¼ğŸ‰

---

## âš ï¸ å½“å‰é—®é¢˜

ä½ è®¿é—® `https://smka17-ff.myshopify.com/apps/test` æ—¶æ˜¾ç¤ºå¯†ç é¡µé¢ï¼Œè¿™æ˜¯å› ä¸ºï¼š

1. **åº—é“ºå¤„äºå¯†ç ä¿æŠ¤çŠ¶æ€** - è¿™æ˜¯æ­£å¸¸çš„ï¼Œæµ‹è¯•åº—é“ºé»˜è®¤æœ‰å¯†ç 
2. **App Proxy è¿˜æ²¡é…ç½®** - éœ€è¦å®Œæˆä¸Šè¿°éƒ¨ç½²æ­¥éª¤

**è§£å†³æ–¹æ¡ˆï¼š**
- å…ˆå®Œæˆéƒ¨ç½²
- æˆ–è€…æš‚æ—¶å…³é—­å¯†ç ä¿æŠ¤ï¼ˆOnline Store â†’ Preferences â†’ Password protectionï¼‰

---

## ğŸ” URL å¯¹åº”å…³ç³»

| Shopify åº—é“ºè®¿é—® | ä»£ç†åˆ° |
|-----------------|-------|
| `/apps/test` | `http://54.176.230.168:4001/` |
| `/apps/test/campaigns/giveaway` | `http://54.176.230.168:4001/campaigns/giveaway` |
| `/apps/test/campaigns/medical-wigs` | `http://54.176.230.168:4001/campaigns/medical-wigs` |
| `/apps/test/_nuxt/xxx.js` | `http://54.176.230.168:4001/_nuxt/xxx.js` |

---

## âœ… æ£€æŸ¥æ¸…å•

### éƒ¨ç½²é˜¶æ®µ
- [ ] ä»£ç æ¨é€åˆ° GitHub
- [ ] Railway éƒ¨ç½²æˆåŠŸ
- [ ] Railway ç¯å¢ƒå˜é‡é…ç½®å®Œæˆ
- [ ] è·å¾— Railway URL

### Shopify é…ç½®
- [ ] App URL å·²æ›´æ–°
- [ ] App Proxy å·²é…ç½®ï¼ˆprefix: apps, subpath: testï¼‰
- [ ] åº”ç”¨å·²å®‰è£…åˆ°åº—é“º

### æµ‹è¯•é˜¶æ®µ
- [ ] è®¿é—® Railway URL æ­£å¸¸
- [ ] è®¿é—® `/apps/test` æ˜¾ç¤ºæ´»åŠ¨é¡µé¢

---

## ğŸ¯ æœ€ç»ˆæ•ˆæœ

é…ç½®å®Œæˆåï¼Œä½ å¯ä»¥ï¼š

1. **åœ¨ Vue/Nuxt ä¸­å¼€å‘æ´»åŠ¨é¡µé¢**
   - ä»£ç åœ¨ `guya-uniwigs-shop` é¡¹ç›®
   - éƒ¨ç½²åˆ° `http://54.176.230.168:4001`

2. **åœ¨ Shopify åº—é“ºä¸­è®¿é—®**
   - `https://smka17-ff.myshopify.com/apps/test/campaigns/xxx`
   - ç”¨æˆ·çœ‹åˆ°çš„æ˜¯ Shopify åŸŸå
   - å®é™…å†…å®¹æ¥è‡ªä½ çš„ Vue é¡¹ç›®

3. **SEO å‹å¥½**
   - URL æ˜¯ Shopify åŸŸå
   - å†…å®¹æ¥è‡ªä½ çš„æ´»åŠ¨é¡µé¢

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Shopify App Proxy å®˜æ–¹æ–‡æ¡£](https://shopify.dev/docs/apps/build/online-store/app-proxies)
- [Railway éƒ¨ç½²æ–‡æ¡£](https://docs.railway.app/)

---

**å¼€å§‹éƒ¨ç½²å§ï¼** ğŸš€ ç¬¬ä¸€æ­¥æ˜¯æ¨é€ä»£ç åˆ° GitHubã€‚

